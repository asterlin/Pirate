<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>iqtest</title>
	<link rel="stylesheet" href="css/iqtest.css">
</head>
<body>
	<div id="mytime">
		<div class="timeline" id="timeRow"></div>
		<div id="mytimeHeight"></div>
	</div>
	
	<div class="time">
		<strong id="changeT">時間 20</strong>
	</div>
	<div class="ques">
		<h1 class="titlePri" id="question">第一問: 請問白鬍子的船叫什麼名字?</h1>
	</div>
	<div class="option">
		<div class="opop o1">
			<strong class="textHi">A</strong>
			<strong class="describe">白鯨號</strong>
			<img class="ans" src="image/iqtest/correct.gif" alt="true">
		</div>
		<div class="opop o2">
			<strong class="textHi">B</strong>
			<strong class="describe">白蛇號</strong>
			<img class="ans" src="image/iqtest/false.gif" alt="false">
		</div>
		<div class="opop o3">
			<strong class="textHi">C</strong>
			<strong class="describe">白龍號</strong>
			<img class="ans" src="image/iqtest/false.gif" alt="false">
		</div>
		<div class="opop o4">
			<strong class="textHi">D</strong>
			<strong class="describe">白蝦號</strong>
			<img class="ans" src="image/iqtest/false.gif" alt="false">
		</div>
	</div>
	<div id="chat">
		<div class="cloud">
			<img src="image/iqtest/chatcloud.png" alt="cloud" class="cc">
			<p class="chatting">動動你的豬腦袋</p>
		</div>
		<img class="head" src="image/iqtest/qahead.png" alt="head">
	</div>
	<script src="js/jquery-3.3.1.min.js"></script>
	<script>
		var count = 19;
		var level = 0;
		var qsNextTimer;
		var showTimer;
		var timesRun = 0;
		var truea = 3;

		// reset題目
		function reset(){
			// $.getJSON('json/iqtest.json',function(data){
			// 		$('#question').html('<h2>'+data[2].question+'</h2>');
			// 	});
			$.getJSON('json/iqtest.json',function(data){
					$('#question').text(data[0].question);
					$('.describe').eq(0).text(data[0].op1);
					$('.describe').eq(1).text(data[0].op2);
					$('.describe').eq(2).text(data[0].op3);
					$('.describe').eq(3).text(data[0].op4);
				});
			$('.ans').css('display','none');//gif檔消失
			$('#mytimeHeight').css('height','');
			$('#timeRow').css('display','block');
			$('#timeRow').width(1400);
			clearInterval(showTimer);
			goNext();
		}

		// reset時間條
		function goNext(){
			count = 19;
			qsNextTimer = setInterval(countdown,800);
		}

		// 時間條
		function countdown(){
			if(count <= 0){
				$('#timeRow').css('display','none');
				$('#mytimeHeight').css('height','80px');
				count%2 == 0?
					document.getElementById("changeT").innerHTML = '時間到!' :
					document.getElementById("changeT").innerHTML = '';
			}else{
				document.getElementById("changeT").innerHTML = '時間 '+count;
			}
			count--;
			timesRun++;
			if( timesRun == 25 ){
				clearInterval(qsNextTimer);
				timesRun = 0;
				reset();
			}
			// console.log('countDown: ',count);
		}

		// 選擇答案
		function show(e){
			e.target.children[2].style.display = 'block';
			clearInterval(qsNextTimer);

			$('#timeRow').css('display','none');
			$('#mytimeHeight').css('height','80px');
			showTimer = setInterval(reset,3000);
		}

		window.addEventListener('load',function(){
			// 第一題
			qsNextTimer = setInterval(countdown,800);
			for(i = 0; i<=3; i++){
				document.getElementsByClassName("opop")[i].onclick = show;
			}
		},false);
	</script>
</body>
</html>